import{j as e,a3 as r,S as O}from"./vendor-mui-Cc1TuOMr.js";import{r as l}from"./vendor-react-CQ9jITQR.js";import{u as _,f as R}from"./index-D6LdA2ZN.js";import{B as g,a as s,S as h,b as p}from"./index-D8a8k8iB.js";import{P as D,c as S,F as E,D as L}from"./Dataflow-J5q19pfI.js";import{d as j}from"./vendor-styled-F-HTyTPr.js";import{R as b,B,X as M,Y as z,C as G,a as y}from"./vendor-charts-Dh6Kn8Ga.js";import{F as w}from"./vendor-query-DLAcIdav.js";import"./vendor-date-CdyaOyHe.js";import"./vendor-antd-Ct-O66bz.js";import"./vendor-moment-C5S46NFB.js";const U=j("div")``,K=j("div")`
  color: #fff;
  font-size: 18px;
`,v=j("p")`
  color: inherit;
  font-size: 48px;
`,W=j("p")`
  color: inherit;
  font-size: 48px;
`;function T({data:t}){return e.jsxs(U,{children:[e.jsx(K,{className:"text-6xl",children:t.title?t.title:"當日入庫"}),e.jsxs(v,{children:[t==null?void 0:t.percentage,"%"]}),e.jsxs(W,{children:[t==null?void 0:t.quantity,"筆"]})]})}//! =============== 1. 設定與常量 ===============
const c={IN_STOCK_COLOR:"#00BCCA",OUT_STOCK_COLOR:"#9FA5AC",BACKGROUND_COLOR:"transparent",CHART_MARGIN:{top:20,right:0,left:0,bottom:0},BAR_SIZE:45,FONT_SIZE:18,TICK_SIZE:16},H=t=>{const o=Math.floor(t).toString().padStart(3,"0"),n=(t%1*10).toFixed(0);return`${o}.${n}%`},k=(t,o)=>{const n=d=>{const{x:u,y:i,width:x,height:m}=d;return e.jsx("text",{x:u+x/2,y:i+m/2+5,fill:"#FFFFFF",textAnchor:"middle",dominantBaseline:"middle",fontSize:c.FONT_SIZE,children:`${t} ${H(o)}`})};return n.displayName=`StockLabel${t}`,n},A=({inStockPercentage:t=0,backgroundColor:o=c.BACKGROUND_COLOR,inStockGradient:n=null,outStockColor:d=c.OUT_STOCK_COLOR,chartId:u})=>{const i=l.useId(),x=l.useMemo(()=>{const a=Math.max(0,Math.min(100,t)),F=100-a;return{validPercentage:a,outStockPercentage:F,data:[{name:"",入庫:a,未入庫:F}]}},[t]),{validPercentage:m,outStockPercentage:f,data:N}=x,P=l.useMemo(()=>k("入庫",m),[m]),I=l.useMemo(()=>k("未入庫",f),[f]),C=`inStockGradient-${u||i.replace(/:/g,"")}`;return e.jsx("div",{className:"w-full",style:{height:"100%",backgroundColor:o},children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(B,{layout:"vertical",data:N,margin:c.CHART_MARGIN,barSize:c.BAR_SIZE,barGap:0,barCategoryGap:0,children:[e.jsxs("defs",{children:["(",e.jsxs("linearGradient",{id:C,x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:n.startColor}),e.jsx("stop",{offset:"100%",stopColor:n.endColor})]}),")"]}),e.jsx(M,{type:"number",domain:[0,100],tickCount:11,ticks:[0,10,20,30,40,50,60,70,80,90,100],stroke:"#FFFFFF",strokeWidth:1,axisLine:{stroke:"#FFFFFF"},tickSize:0,tickMargin:10,tick:{fontSize:c.TICK_SIZE,fill:"#FFFFFF"},tickFormatter:a=>a===0?"00":a}),e.jsx(z,{dataKey:"name",type:"category",hide:!0}),e.jsx(G,{vertical:!0,horizontal:!1,stroke:"#FFFFFF",strokeWidth:1,strokeOpacity:.5}),e.jsx(y,{dataKey:"入庫",stackId:"a",fill:`url(#${C})`,label:e.jsx(P,{})}),e.jsx(y,{dataKey:"未入庫",stackId:"a",fill:d,label:e.jsx(I,{})})]})})})};function $(){return e.jsx(g,{children:e.jsx(s,{style:{backgroundColor:"transparent"},children:e.jsx(s.Content,{children:e.jsxs(r,{container:!0,size:12,spacing:2.5,children:[e.jsx(r,{size:9,justifyContent:"center",alignContent:"center",children:e.jsx(A,{inStockPercentage:30,inStockGradient:{startColor:"#04B30A ",endColor:"#37FFF2 "}})}),e.jsx(r,{size:3,children:e.jsx(T,{data:{percentage:30,quantity:1e5}})})]})})})})}function q(){return e.jsx(g,{children:e.jsx(s,{style:{backgroundColor:"transparent"},children:e.jsx(s.Content,{children:e.jsxs(r,{container:!0,size:12,spacing:2.5,children:[e.jsx(r,{size:9,justifyContent:"center",alignContent:"center",children:e.jsx(A,{inStockPercentage:30,inStockGradient:{startColor:"#0491B4",endColor:"#37FFF2 "}})}),e.jsx(r,{size:3,children:e.jsx(T,{data:{title:"未來三天入庫",percentage:30,quantity:1e5}})})]})})})})}//! =============== 1. 設定與常量 ===============
const Z={warning:{condition:S("orderDate",20,"before"),color:h.WARNING,columns:[1,2,3,4,5,6,7,8,9]},expired:{condition:S("orderDate",0,"after"),color:h.EXPIRED,columns:[1,2,3,4,5,6,7,8,9]}},X={orderDate:1,orderNumber:2,manufacturingOrderNumber:3,productName:4,manufacturingQuantity:5,primaryShot:6,secondaryShot:7,inspection:8,shipment:9},Q=["NO.","訂單日期","訂單編號","製造單號","產品名稱","製造數量","主射出","次射出","檢驗狀態","出貨狀態"],Y=[80],V=["center","center","center","left","right","center","center","center","center"];function J({data:t}){return!t||t.length===0?e.jsx("div",{className:"empty-data",children:"暫無資料"}):e.jsx(D,{width:"100%",height:"650px",initialData:t,header:Q,fieldMapping:X,columnWidths:Y,columnAligns:V,statusRules:Z,rowNum:14})}//! =============== 1. 設定與常量 ===============
const ee=window.location.pathname.includes("React-WiseScheduling_TimeLine_Library")?"/React-WiseScheduling_TimeLine_Library":"",te=`${ee}/mock/DailyProductionTasksMock.json`,re=[{status:p.NORMAL,color:h.NORMAL},{status:p.WARNING,color:h.WARNING},{status:p.EXPIRED,color:h.EXPIRED}],ne=()=>w({queryKey:["DailyProductionTasksItem"],queryFn:async()=>{try{const t=await fetch(te);if(!t.ok)throw new Error("無法讀取每日生產任務資料");return t.json()}catch(t){throw console.error("資料讀取錯誤:",t.message),t}}});function se(){const[t,o]=l.useState(""),{data:n,isLoading:d,isError:u,error:i}=ne(),x=()=>u?(t||o((i==null?void 0:i.message)||"無法讀取每日生產任務資料"),e.jsx("div",{className:"error-container",children:t})):d?e.jsx("div",{className:"loading-container",children:"載入中..."}):e.jsx(J,{data:n});return e.jsx(e.Fragment,{children:e.jsx(g,{children:e.jsxs(s,{style:{backgroundColor:"transparent"},children:[e.jsx(s.Header,{children:e.jsx(s.Title,{children:e.jsxs(E,{children:[e.jsx(s.Title,{children:"本日生產任務"}),e.jsx(L,{data:re})]})})}),e.jsx(s.Content,{children:x()})]})})})}function pe(){_("生產進度追蹤");const{setHeaderName:t}=R();return l.useEffect(()=>{t("即時生產進度追蹤")},[]),e.jsx("section",{children:e.jsxs(O,{marginTop:1.25,spacing:2.5,children:[e.jsxs(r,{container:!0,spacing:2.5,size:12,children:[e.jsx(r,{size:6,spacing:2.5,children:e.jsx($,{})}),e.jsx(r,{size:6,spacing:2.5,children:e.jsx(q,{})})]}),e.jsx(r,{container:!0,spacing:2.5,children:e.jsx(r,{size:12,children:e.jsx(se,{})})})]})})}export{pe as default};
