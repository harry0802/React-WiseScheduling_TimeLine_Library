import{j as E}from"./vendor-mui-Cc1TuOMr.js";import{r as R}from"./vendor-react-CQ9jITQR.js";import{a as de,g as he,d as ae,e as ge}from"./index-D6LdA2ZN.js";import{d as q}from"./vendor-styled-F-HTyTPr.js";function U(t){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},U(t)}function Z(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Z=function(){return o};var t,o={},c=Object.prototype,s=c.hasOwnProperty,f=Object.defineProperty||function(r,e,n){r[e]=n.value},g=typeof Symbol=="function"?Symbol:{},w=g.iterator||"@@iterator",m=g.asyncIterator||"@@asyncIterator",y=g.toStringTag||"@@toStringTag";function h(r,e,n){return Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{h({},"")}catch{h=function(n,a,u){return n[a]=u}}function S(r,e,n,a){var u=e&&e.prototype instanceof G?e:G,i=Object.create(u.prototype),l=new Q(a||[]);return f(i,"_invoke",{value:K(r,n,l)}),i}function I(r,e,n){try{return{type:"normal",arg:r.call(e,n)}}catch(a){return{type:"throw",arg:a}}}o.wrap=S;var D="suspendedStart",j="suspendedYield",L="executing",p="completed",b={};function G(){}function H(){}function O(){}var A={};h(A,w,function(){return this});var C=Object.getPrototypeOf,B=C&&C(C(V([])));B&&B!==c&&s.call(B,w)&&(A=B);var _=O.prototype=G.prototype=Object.create(A);function M(r){["next","throw","return"].forEach(function(e){h(r,e,function(n){return this._invoke(e,n)})})}function P(r,e){function n(u,i,l,d){var v=I(r[u],r,i);if(v.type!=="throw"){var x=v.arg,N=x.value;return N&&U(N)=="object"&&s.call(N,"__await")?e.resolve(N.__await).then(function(T){n("next",T,l,d)},function(T){n("throw",T,l,d)}):e.resolve(N).then(function(T){x.value=T,l(x)},function(T){return n("throw",T,l,d)})}d(v.arg)}var a;f(this,"_invoke",{value:function(i,l){function d(){return new e(function(v,x){n(i,l,v,x)})}return a=a?a.then(d,d):d()}})}function K(r,e,n){var a=D;return function(u,i){if(a===L)throw new Error("Generator is already running");if(a===p){if(u==="throw")throw i;return{value:t,done:!0}}for(n.method=u,n.arg=i;;){var l=n.delegate;if(l){var d=F(l,n);if(d){if(d===b)continue;return d}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(a===D)throw a=p,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);a=L;var v=I(r,e,n);if(v.type==="normal"){if(a=n.done?p:j,v.arg===b)continue;return{value:v.arg,done:n.done}}v.type==="throw"&&(a=p,n.method="throw",n.arg=v.arg)}}}function F(r,e){var n=e.method,a=r.iterator[n];if(a===t)return e.delegate=null,n==="throw"&&r.iterator.return&&(e.method="return",e.arg=t,F(r,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var u=I(a,r.iterator,e.arg);if(u.type==="throw")return e.method="throw",e.arg=u.arg,e.delegate=null,b;var i=u.arg;return i?i.done?(e[r.resultName]=i.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=t),e.delegate=null,b):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,b)}function J(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function z(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function Q(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(J,this),this.reset(!0)}function V(r){if(r||r===""){var e=r[w];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var n=-1,a=function u(){for(;++n<r.length;)if(s.call(r,n))return u.value=r[n],u.done=!1,u;return u.value=t,u.done=!0,u};return a.next=a}}throw new TypeError(U(r)+" is not iterable")}return H.prototype=O,f(_,"constructor",{value:O,configurable:!0}),f(O,"constructor",{value:H,configurable:!0}),H.displayName=h(O,y,"GeneratorFunction"),o.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return!!e&&(e===H||(e.displayName||e.name)==="GeneratorFunction")},o.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,O):(r.__proto__=O,h(r,y,"GeneratorFunction")),r.prototype=Object.create(_),r},o.awrap=function(r){return{__await:r}},M(P.prototype),h(P.prototype,m,function(){return this}),o.AsyncIterator=P,o.async=function(r,e,n,a,u){u===void 0&&(u=Promise);var i=new P(S(r,e,n,a),u);return o.isGeneratorFunction(e)?i:i.next().then(function(l){return l.done?l.value:i.next()})},M(_),h(_,y,"Generator"),h(_,w,function(){return this}),h(_,"toString",function(){return"[object Generator]"}),o.keys=function(r){var e=Object(r),n=[];for(var a in e)n.push(a);return n.reverse(),function u(){for(;n.length;){var i=n.pop();if(i in e)return u.value=i,u.done=!1,u}return u.done=!0,u}},o.values=V,Q.prototype={constructor:Q,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(z),!e)for(var n in this)n.charAt(0)==="t"&&s.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(x,N){return l.type="throw",l.arg=e,n.next=x,N&&(n.method="next",n.arg=t),!!N}for(var u=this.tryEntries.length-1;u>=0;--u){var i=this.tryEntries[u],l=i.completion;if(i.tryLoc==="root")return a("end");if(i.tryLoc<=this.prev){var d=s.call(i,"catchLoc"),v=s.call(i,"finallyLoc");if(d&&v){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(d){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!v)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,n){for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a];if(u.tryLoc<=this.prev&&s.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var i=u;break}}i&&(e==="break"||e==="continue")&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var l=i?i.completion:{};return l.type=e,l.arg=n,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(l)},complete:function(e,n){if(e.type==="throw")throw e.arg;return e.type==="break"||e.type==="continue"?this.next=e.arg:e.type==="return"?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):e.type==="normal"&&n&&(this.next=n),b},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),z(a),b}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc===e){var u=a.completion;if(u.type==="throw"){var i=u.arg;z(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:V(e),resultName:n,nextLoc:a},this.method==="next"&&(this.arg=t),b}},o}function pe(t,o){return ve(t)||ye(t,o)||se(t,o)||me()}function me(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(t,o){var c=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(c!=null){var s,f,g,w,m=[],y=!0,h=!1;try{if(g=(c=c.call(t)).next,o!==0)for(;!(y=(s=g.call(c)).done)&&(m.push(s.value),m.length!==o);y=!0);}catch(S){h=!0,f=S}finally{try{if(!y&&c.return!=null&&(w=c.return(),Object(w)!==w))return}finally{if(h)throw f}}return m}}function ve(t){if(Array.isArray(t))return t}function ue(t,o){var c=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);o&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(t,f).enumerable})),c.push.apply(c,s)}return c}function k(t){for(var o=1;o<arguments.length;o++){var c=arguments[o]!=null?arguments[o]:{};o%2?ue(Object(c),!0).forEach(function(s){we(t,s,c[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):ue(Object(c)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(c,s))})}return t}function we(t,o,c){return o=be(o),o in t?Object.defineProperty(t,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[o]=c,t}function be(t){var o=xe(t,"string");return U(o)=="symbol"?o:String(o)}function xe(t,o){if(U(t)!="object"||!t)return t;var c=t[Symbol.toPrimitive];if(c!==void 0){var s=c.call(t,o||"default");if(U(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)}function $(t){return Ee(t)||Ce(t)||se(t)||je()}function je(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function se(t,o){if(t){if(typeof t=="string")return ie(t,o);var c=Object.prototype.toString.call(t).slice(8,-1);if(c==="Object"&&t.constructor&&(c=t.constructor.name),c==="Map"||c==="Set")return Array.from(t);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return ie(t,o)}}function Ce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ee(t){if(Array.isArray(t))return ie(t)}function ie(t,o){(o==null||o>t.length)&&(o=t.length);for(var c=0,s=new Array(o);c<o;c++)s[c]=t[c];return s}var Se={header:[],data:[],rowNum:5,headerBGC:"#00BAFF",oddRowBGC:"#003B51",evenRowBGC:"#0A2732",waitTime:2e3,headerHeight:35,columnWidth:[],align:[],index:!1,indexHeader:"#",carousel:"single",hoverPause:!0};function Le(t){var o,c=t.header,s=t.index,f=t.indexHeader;return(o=c)!==null&&o!==void 0&&o.length?(c=$(c),s&&c.unshift(f),c):[]}function Oe(t){var o=t.data,c=t.index,s=t.headerBGC,f=t.rowNum;c&&(o=o.map(function(m,y){m=$(m);var h='<span class="index" style="background-color: '.concat(s,';">').concat(y+1,"</span>");return m.unshift(h),m}));var g=o.map(function(m,y){return{ceils:m,rowIndex:y}}),w=g.length;return w>f&&w<2*f&&(g=[].concat($(g),$(g))),g.map(function(m,y){return k(k({},m),{},{scroll:y})})}function Ae(t,o){var c=o.length,s=new Array(c).fill("left"),f=t.align;return ae(s,f)}var Ne=R.forwardRef(function(t,o){var c=t.onClick,s=t.config,f=t.className,g=t.style,w=t.onMouseOver,m=de(o),y=m.width,h=m.height,S=m.domRef,I=R.useState({mergedConfig:null,header:[],rows:[],widths:[],heights:[],aligns:[]}),D=pe(I,2),j=D[0],L=D[1],p=j.mergedConfig,b=j.header,G=j.rows,H=j.widths,O=j.heights,A=j.aligns,C=R.useRef(k(k({},j),{},{rowsData:[],avgHeight:0,animationIndex:0}));Object.assign(C.current,j);function B(){if(p){var r=M(p,C.current.rowsData),e=P(p,b),n={widths:r,heights:e};Object.assign(C.current,n),L(function(a){return k(k({},a),n)})}}function _(){var r=ae(ge.deepClone(Se,!0),s||{}),e=Le(r),n=Oe(r),a=M(r,C.current.rowsData),u=P(r,e),i=Ae(r,e),l={mergedConfig:r,header:e,rows:n,widths:a,aligns:i,heights:u};Object.assign(C.current,l,{rowsData:n,animationIndex:0}),L(function(d){return k(k({},d),l)})}function M(r,e){var n=r.columnWidth,a=r.header,u=n.reduce(function(v,x){return v+x},0),i=0;e[0]?i=e[0].ceils.length:a!=null&&a.length&&(i=a.length);var l=(y-u)/(i-n.length),d=new Array(i).fill(l);return ae(d,n)}function P(r,e){var n=r.headerHeight,a=r.rowNum,u=r.data,i=h;e.length&&(i-=n);var l=i/a;return Object.assign(C.current,{avgHeight:l}),new Array(u.length).fill(l)}function K(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Z().mark(function e(n){var a,u,i,l,d,v,x,N,T,re,ee,X,ne,oe,te;return Z().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(a=C.current,u=a.avgHeight,i=a.animationIndex,l=a.mergedConfig,d=a.rowsData,v=l||{},x=v.waitTime,N=v.carousel,T=v.rowNum,re=d.length,!r){Y.next=6;break}return Y.next=6,new Promise(function(W){return setTimeout(W,x)});case 6:return ee=N==="single"?1:T,X=d.slice(i),(n=X).push.apply(n,$(d.slice(0,i))),X=X.slice(0,N==="page"?T*2:T+1),ne=new Array(re).fill(u),L(function(W){return k(k({},W),{},{rows:X,heights:ne})}),Y.next=14,new Promise(function(W){return setTimeout(W,300)});case 14:i+=ee,oe=i-re,oe>=0&&(i=oe),te=$(ne),te.splice.apply(te,[0,ee].concat($(new Array(ee).fill(0)))),Object.assign(C.current,{animationIndex:i}),L(function(W){return k(k({},W),{},{heights:te})});case 21:case"end":return Y.stop()}},e)})()}function F(r,e,n,a,u){var i=a||{},l=i.ceils,d=i.rowIndex;r&&r({row:l,ceil:u,rowIndex:d,columnIndex:n})}var J=R.useRef({});function z(r,e,n,a,u){if(r&&F(w,e,n,a,u),!!(p!=null&&p.hoverPause)){var i=J.current,l=i.pause,d=i.resume;r&&l&&d?l():function(){d&&d()}()}}var Q=function(e){return p==null?void 0:p[e%2===0?"evenRowBGC":"oddRowBGC"]};R.useEffect(function(){var r=Z().mark(n);_();var e=!0;function n(){return Z().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.delegateYield(K(e),"t0",2);case 2:return e=!1,d.next=5,new Promise(function(v){var x;return setTimeout(v,((x=C.current)===null||x===void 0||(x=x.mergedConfig)===null||x===void 0?void 0:x.waitTime)-300)});case 5:d.next=0;break;case 7:case"end":return d.stop()}},r)}var a=C.current.rows,u=p==null?void 0:p.rowNum,i=a.length;if(!(u>=i))return J.current=he(n),J.current.end},[s,S.current]),R.useEffect(B,[y,h,S.current]);var V=R.useMemo(function(){return f?"dv-scroll-board ".concat(f):"dv-scroll-board"},[f]);return E.jsxs("div",{className:V,style:g,ref:S,children:[!!b.length&&!!p&&E.jsx("div",{className:"header",style:{backgroundColor:"".concat(p.headerBGC)},children:b.map(function(r,e){return E.jsx("div",{className:"header-item",style:{height:"".concat(p.headerHeight,"px"),lineHeight:"".concat(p.headerHeight,"px"),width:"".concat(H[e],"px"),textAlign:(A==null?void 0:A[e])||"left"},dangerouslySetInnerHTML:{__html:r}},"".concat(r,"-").concat(e))})}),!!p&&E.jsx("div",{className:"rows",style:{height:"".concat(h-(b!=null&&b.length?p.headerHeight:0),"px")},children:G.map(function(r,e){return E.jsx("div",{className:"row-item",style:{height:"".concat(O[e],"px"),lineHeight:"".concat(O[e],"px"),backgroundColor:"".concat(Q(r.rowIndex))},children:r.ceils.map(function(n,a){return E.jsx("div",{className:"ceil",style:{width:"".concat(H[a],"px"),textAlign:(A==null?void 0:A[a])||"left"},dangerouslySetInnerHTML:{__html:n},onClick:function(){return F(c,e,a,r,n)},onMouseEnter:function(){return z(!0,e,a,r,n)},onMouseLeave:function(){return z(!1)}},"".concat(n,"-").concat(e,"-").concat(a))})},"".concat(r.toString(),"-").concat(r.scroll))})})]})});const le={headerBGC:"#0C2E49",oddRowBGC:"#103362",evenRowBGC:"#0A2138",waitTime:3e3,carousel:"single",headerHeight:45,index:!1},Te={border:"1px solid #114886",borderRadius:"4px",background:"rgba(4, 21, 46, 0.7)",boxShadow:"0 0 10px rgba(0, 140, 255, 0.3)"},ke=[60],Ie=["center","center","center","center","left","right","center"],ce=["NO.","型號編號","型號名稱","產品編號","產品名稱","生產數量","機台"],fe=(t,o)=>`<span style="color:${o};">${t}</span>`,_e=t=>{const o=String(t+1).padStart(2,"0");return fe(o,"#fff")},Pe=(t,o)=>typeof t=="function"?t(o):o.status===t,Re=(t,o,c)=>{for(const[s,f]of Object.entries(o))if(Pe(f.condition,t))return s;return c},He=(t,o,c)=>{const s=c[o];if(!s||!s.color)return t;const f=s.columns||[];return t.map((g,w)=>f.includes(w)&&g?fe(g,s.color):g)},De=(t,o={})=>{if(!t||!Array.isArray(t)||t.length===0)return{header:o.header||ce,data:[]};const{header:c=ce,fieldMapping:s={modelCode:1,modelName:2,productCode:3,productName:4,quantity:5,station:6},formatters:f={quantity:h=>h.toLocaleString()},statusRules:g={normal:{condition:()=>!0,color:"#1DE9B6",columns:[1]}},defaultStatus:w="normal",dataProcessor:m}=o;let y=t.map((h,S)=>{const I=Array(c.length).fill("");I[0]=_e(S),Object.entries(s).forEach(([j,L])=>{if(h[j]!==void 0){const p=f[j];I[L]=p?p(h[j]):h[j]}});const D=Re(h,g,w);return He(I,D,g)});return typeof m=="function"&&(y=m(y,t)),{header:c,data:y}},Je=(t,o,c)=>s=>{const f=Number(s[t]);return f>=o&&f<=c},Qe=(t,o,c="before")=>s=>{const f=new Date,g=new Date(s[t]),w=Math.abs(g-f),m=Math.ceil(w/(1e3*60*60*24));return c==="before"?m<=o&&g>f:m<=o||g<f},Be=(t,o,c={})=>({...le,header:t,data:o,rowNum:(c==null?void 0:c.rowNum)||3,columnWidth:c.columnWidths,align:c.columnAligns,...c.scrollBoardConfig||{}}),Me=q(Ne)`
  && {
    width: 100%;
    height: 100%;
    position: relative;
    .ceil {
      font-size: 20px;
      letter-spacing: 2px;
    }
    .header-item {
      font-weight: 600;
      letter-spacing: 2px;
      font-size: 20px;
    }
  }
`,Ve=t=>{const{width:o="100%",height:c="152px",initialData:s=[],header:f=ce,fieldMapping:g,formatters:w,statusRules:m,defaultStatus:y="normal",refreshInterval:h=0,tableStyle:S={},scrollBoardConfig:I={},columnWidths:D=ke,columnAligns:j=Ie,dataProcessor:L,onRowClick:p,rowNum:b}=t,[G,H]=R.useState(null),[O,A]=R.useState(!0),C=R.useMemo(()=>({header:f,fieldMapping:g,formatters:w,statusRules:m,defaultStatus:y,dataProcessor:L}),[f,g,w,m,y,L]);R.useEffect(()=>{const _=()=>{try{const{header:P,data:K}=De(s,C),F=Be(P,K,{columnWidths:D,columnAligns:j,scrollBoardConfig:I,rowNum:b});H(F)}catch(P){console.error("數據處理錯誤:",P),H({header:f,data:[["數據處理失敗，請重試"]],...le})}finally{A(!1)}};_();let M;return h>0&&(M=setInterval(_,h)),()=>{M&&clearInterval(M)}},[s]);const B={width:o,height:c,...Te,...S};return O||!G?E.jsx("div",{style:B,children:"載入中..."}):E.jsx(E.Fragment,{children:E.jsx(Me,{config:G,style:B,onClick:p})})},Ge=q.div`
  display: flex;
  align-items: center;
  column-gap: 20px;
`,Fe=q.div`
  display: flex;
  align-items: center;
  gap: 5px;
`,We=q.span`
  width: 14px;
  height: 14px;
  background-color: ${({color:t})=>t};
`,$e=q.span`
  font-size: 14px;
  font-weight: 600;
  letter-spacing: 1.2px;
`;function Xe({data:t}){return E.jsx(Ge,{children:t.map(o=>E.jsxs(Fe,{children:[E.jsx(We,{color:o.color}),E.jsx($e,{children:o.status})]},o.color))})}const Ze=q.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`;export{Xe as D,Ze as F,Ve as P,Je as a,Qe as c};
